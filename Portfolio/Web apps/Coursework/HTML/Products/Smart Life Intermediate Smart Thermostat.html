<!DOCTYPE html>
<html>

<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <title>Smart Life - Shop</title>
    <link rel="stylesheet" href="../../CSS/Styles.css">
    <link rel="stylesheet" href="../../CSS/prodPageStyles.css">
    <script src="../../JavaScript/basicJs.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <header>
        <h1>
            <img src="../Images/logo.png" alt="The logo for this website" width="50" height="50" class="logo">
            Smart Life
            <img src="../Images/logo.png" alt="The logo for this website" width="50" height="50" class="logo">
        </h1>
        <hr>

        <div class="menuBar">
            <ul class="nav">
                <li class="nav"><a class="nav" href="../index.html">Home</a></li>
                <li class="nav"><a class="nav" href="../about.html">About</a></li>
                <li class="nav"><a class="nav" href="../contact.html">Contact</a></li>
                <li class="nav" id="currentPage"><a class="nav" href="../shop.html">Shop</a></li>
            </ul>
            <div class="icons">
                <a href="../cart.html"> <img src="../Images/cart.png" class="cart"> </a>
                <a href="../login.html" id="accountButton"> <img src="../Images/account.png" class="account"> </a>
            </div>
        </div>
    </header>

    <section class="mainBody">
        <p id="productID">3</p>
        <h2 class="productTitle" id="prodTitle">Smart Life Intermediate Smart Thermostat</h2>
        <br>
        <div class="prodBox">
            <img src="../../HTML/Images/thermostat1.jpg" alt="The image for this product" class="mainImage" id="productImage">
            <div class="prodDetails">
                <h3 class="smallHeading">Product Details</h3>
                <p class="prodDesc" id="productDesc">A smart thermostat manufactured and sold only by Smart Life</p>
                <p class="prodPrice" id="productPrice">Product Price: &pound;99.54</p>
                <button onclick="addToCart()" class="toProdPage">Add To Cart</button>
            </div>
        </div>
        <br>
    </section>

    <script>
        try {
            fetch('../../PHP/isLoggedIn.php')
                .then(response => response.text())
                .then(data => {
                    var parser = new DOMParser();
                    var doc = parser.parseFromString(data, 'text/html');
                    var bodyText = doc.body.innerText.trim().split('\n');
                    if (bodyText[0] == "Welcome, you are logged in!") {
                        var newLink = bodyText[1];
                        document.getElementById("accountButton").href = "../" + newLink;
                        document.getElementById("accountLinkFooter").href = "../" + newLink;
                    } else {
                        console.log(bodyText[0]);  // Log the message
                    }
                });
        } catch (error) {
            console.log(error);
        }

        function addToCart() {
            var idOfProduct = document.getElementById('productID').textContent;
            console.log(idOfProduct);

            fetch('../../PHP/addProductToCart.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'productId=' + encodeURIComponent(idOfProduct),
            })
                .then(response => response.text())
                .then(data => {
                    alert(data); // Alert the message
                })
                .catch(error => console.error('Error:', error));
        }
    </script>

    <footer>
        <div class="footer">
            <div class="w-container">
                <div class="w-row">
                    <div class="w-col w-col-4">
                        <h3>About</h3>
                        <div></div>
                        <div>Made with Html, Css, JavaScript...</div>
                        <div>...PhP and Sql, etc.</div>
                        <div>Smart Life</div>
                        <div>Your go-to company for IoT devices and solutions</div>
                        <div>Welcome to Smart Life, the forefront of the Internet of Things revolution.</div>
                    </div>
                    <div class="w-col w-col-4">
                        <h3>Useful Links</h3>
                        <div class="footer-link-row">
                            <a href="index.html" target="_blank" class="footer-link">Home</a>
                            <a href="shop.html" target="_blank" class="footer-link">Shop</a>
                        </div>
                        <div class="footer-link-row">
                            <a href="about.html" target="_blank" class="footer-link">About</a>
                            <a href="#" target="_blank" class="footer-link" id="accountLinkFooter">Account</a>
                        </div>
                        <div class="footer-link-row">
                            <a href="contact.html" target="_blank" class="footer-link">Contact</a>
                            <a href="cart.html" target="_blank" class="footer-link">Cart</a>
                        </div>
                        <div class="footer-link-row">
                            <a href="login.html" target="_blank" class="footer-link">Login</a>
                            <a href="register.html" target="_blank" class="footer-link">Sign-up</a>
                        </div>
                    </div>
                    <div class="f-col">
                        <h3>Socials</h3>
                        <div>
                            <img src="https://assets-global.website-files.com/5739f5a49fbb0b705633b84e/5739f5a59fbb0b705633b875_social-18.svg" width="20" alt="" class="info-icon">
                            <a href="https://twitter.com/" class="footer-link with-icon">Twitter</a>
                        </div>
                        <div>
                            <img src="https://assets-global.website-files.com/5739f5a49fbb0b705633b84e/5739f5a59fbb0b705633b864_social-03.svg" width="20" alt="" class="info-icon">
                            <a href="https://www.facebook.com/" class="footer-link with-icon">Facebook</a>
                        </div>
                        <div>
                            <img src="https://assets-global.website-files.com/5739f5a49fbb0b705633b84e/5739f5a59fbb0b705633b86a_social-11.svg" width="20" alt="" class="info-icon">
                            <a href="https://www.pinterest.com/" class="footer-link with-icon">Pinterest</a>
                        </div>
                        <div>
                            <img src="https://assets-global.website-files.com/5739f5a49fbb0b705633b84e/5739f5a59fbb0b705633b866_social-06.svg" width="20" alt="" class="info-icon">
                            <a href="https://plus.google.com/" class="footer-link with-icon">Google</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <h1>Copyright Hasan Akhtar 2024</h1>
    </footer>
</body>

</html>
