<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Smart Life - Shop</title>
    <link rel="stylesheet" href="../CSS/Styles.css">
    <link rel="stylesheet" href="../CSS/shopPageStyles.css">
    <script src="../JavaScript/basicJs.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <header>
        <h1>
            <img src="Images/logo.png" alt="The logo for this website" width="50" height="50" class="logo">
            Smart Life
            <img src="Images/logo.png" alt="The logo for this website" width="50" height="50" class="logo">
        </h1>
        <hr>

        <div class="menuBar">
            <ul class="nav">
                <li class="nav"><a class="nav" href="index.html">Home</a></li>
                <li class="nav"><a class="nav" href="about.html">About</a></li>
                <li class="nav"><a class="nav" href="contact.html">Contact</a></li>
                <li class="nav" id="currentPage"><a class="nav" href="shop.html">Shop</a></li>
            </ul>
            <div class="icons">
                <a href="cart.html"> <img src="Images/cart.png" class="cart"> </a>
                <a href="login.html" id="accountButton"> <img src="Images/account.png" class="account"> </a>
            </div>
        </div>
    </header>

    <section class="mainBody">
        <div class="right">
            <h3 class="shopTitle">Products Page</h3>
            <p>Here you will find all of Smart Life's products with filter and sorting options</p>
            <h2 class="sidebarTitle">Filter Items</h2><br>
            <form class="sidebarForm" id="filterForm">
                <label for="categoriesSelection" class="sidebarLabel">Categories</label><br><br>
                <input type="checkbox" name="Kitchen-Appliances" id="Kitchen-Appliances"
                    data-name="categoriesSelection">
                <label for="Kitchen-Appliances">Kitchen Appliances</label><br>
                <input type="checkbox" name="Sitting-Room-Gadgets" id="Sitting-Room-Gadgets"
                    data-name="categoriesSelection">
                <label for="Sitting-Room-Gadgets">Sitting Room Gadgets</label><br>
                <input type="checkbox" name="Smart-Home" id="Smart-Home" data-name="categoriesSelection">
                <label for="Smart-Home">Smart Home</label><br>
                <input type="checkbox" name="Other" id="Other" data-name="categoriesSelection">
                <label for="Other">Other</label><br><br>

                <label for="priceRangeSelection" class="sidebarLabel">Price Range</label><br><br>
                <input type="checkbox" name="ZeroPounds" id="ZeroPounds" data-name="priceRangeSelection">
                <label for="ZeroPounds">&#163;0 - &#163;14.99</label><br>
                <input type="checkbox" name="FifteenPounds" id="FifteenPounds" data-name="priceRangeSelection">
                <label for="FifteenPounds">&#163;15 - &#163;29.99</label><br>
                <input type="checkbox" name="ThirtyPounds" id="ThirtyPounds" data-name="priceRangeSelection">
                <label for="ThirtyPounds">&#163;30 - &#163;49.99</label><br>
                <input type="checkbox" name="FiftyPounds" id="FiftyPounds" data-name="priceRangeSelection">
                <label for="FiftyPounds">&#163;50 - &#163;99.99</label><br>
                <input type="checkbox" name="HundredPounds" id="HundredPounds" data-name="priceRangeSelection">
                <label for="HundredPounds">&#163;100 - &#163;199.99</label><br>
                <input type="checkbox" name="TwoHundredPounds" id="TwoHundredPounds" data-name="priceRangeSelection">
                <label for="TwoHundredPounds">&#163;200+</label><br><br>

                <input type="submit" value="Filter" class="sidebarButton">
            </form>

            <h2 class="sidebarTitle">Sort Items</h2><br>
            <form class="sidebarForm" id="sortForm">
                <input type="radio" name="sortItems" id="PriceLH" data-name="sortItems">
                <label for="PriceLH">Price: Low to High</label><br>
                <input type="radio" name="sortItems" id="PriceHL" data-name="sortItems">
                <label for="PriceHL">Price: High to Low</label><br>
                <input type="radio" name="sortItems" id="MostRecent" data-name="sortItems">
                <label for="MostRecent">Most Recent</label><br>
                <input type="radio" name="sortItems" id="MostPopular" data-name="sortItems">
                <label for="MostPopular">Most Popular</label><br>
                <input type="radio" name="sortItems" id="LeastPopular" data-name="sortItems">
                <label for="LeastPopular">Least Popular</label><br><br>

                <input type="submit" value="Sort" class="sidebarButton">
            </form>
        </div>
        <div class="productsGrid" id="shopProducts">
            <div class="productsGrid2">
                <div class="productBox" id="prod1">
                    <p class="prodTitle">Product 1</p>
                    <img src="" width="100" height="100" alt="Shop Product 1">
                    <p class="prodDesc">Product Description 1</p>
                    <p class="prodPrice">£0.00</p>
                    <a href="#"><button type="button" class="toProdPage" id="prodPage1">View More Info</button></a>
                </div>
                <div class="productBox" id="prod2">
                    <p class="prodTitle">Product 2</p>
                    <img src="" width="100" height="100" alt="Shop Product 2">
                    <p class="prodDesc">Product Description 2</p>
                    <p class="prodPrice">£0.00</p>
                    <a href="#"><button type="button" class="toProdPage" id="prodPage2">View More Info</button></a>
                </div>
                <div class="productBox" id="prod3">
                    <p class="prodTitle">Product 3</p>
                    <img src="" width="100" height="100" alt="Shop Product 3">
                    <p class="prodDesc">Product Description 3</p>
                    <p class="prodPrice">£0.00</p>
                    <a href="#"><button type="button" class="toProdPage" id="prodPage3">View More Info</button></a>
                </div>
                <div class="productBox" id="prod4">
                    <p class="prodTitle">Product 4</p>
                    <img src="" width="100" height="100" alt="Shop Product 4">
                    <p class="prodDesc">Product Description 4</p>
                    <p class="prodPrice">£0.00</p>
                    <a href="#"><button type="button" class="toProdPage" id="prodPage4">View More Info</button></a>
                </div>
            </div>
            <div class="productsGrid2">
                <div class="productBox" id="prod5">
                    <p class="prodTitle">Product 5</p>
                    <img src="" width="100" height="100" alt="Shop Product 5">
                    <p class="prodDesc">Product Description 5</p>
                    <p class="prodPrice">£0.00</p>
                    <a href="#"><button type="button" class="toProdPage" id="prodPage5">View More Info</button></a>
                </div>
                <div class="productBox" id="prod6">
                    <p class="prodTitle">Product 6</p>
                    <img src="" width="100" height="100" alt="Shop Product 6">
                    <p class="prodDesc">Product Description 6</p>
                    <p class="prodPrice">£0.00</p>
                    <a href="#"><button type="button" class="toProdPage" id="prodPage6">View More Info</button></a>
                </div>
                <div class="productBox" id="prod7">
                    <p class="prodTitle">Product 7</p>
                    <img src="" width="100" height="100" alt="Shop Product 7">
                    <p class="prodDesc">Product Description 7</p>
                    <p class="prodPrice">£0.00</p>
                    <a href="#"><button type="button" class="toProdPage" id="prodPage7">View More Info</button></a>
                </div>
                <div class="productBox" id="prod8">
                    <p class="prodTitle">Product 8</p>
                    <img src="" width="100" height="100" alt="Shop Product 8">
                    <p class="prodDesc">Product Description 8</p>
                    <p class="prodPrice">£0.00</p>
                    <a href="#"><button type="button" class="toProdPage" id="prodPage8">View More Info</button></a>
                </div>
            </div>
        </div>
        <br>
    </section>

    <script>
        try {
            fetch('../PHP/isLoggedIn.php')
                .then(response => response.text())
                .then(data => {
                    var parser = new DOMParser();
                    var doc = parser.parseFromString(data, 'text/html');
                    var bodyText = doc.body.innerText.trim().split('\n');
                    if (bodyText[0] == "Welcome, you are logged in!") {
                        var newLink = bodyText[1];
                        document.getElementById("accountButton").href = newLink;
                        document.getElementById("accountLinkFooter").href = newLink;
                    } else {
                        console.log(bodyText[0]);  // Log the message
                    }
                });
        } catch (error) {
            console.log(error);
        }

        function setProductLinks() {
            // Select all product boxes
            var productBoxes = document.querySelectorAll('.productBox');

            // Loop through each product box
            productBoxes.forEach(function (box) {
                // Get the product title and the anchor element
                var title = box.querySelector('.prodTitle').textContent;
                var prodLink = "Products/" + title + ".html";
                var link = box.querySelector('a');

                // Set the href of the anchor element to the product link
                link.href = prodLink;
            });
        }

        try {
            fetch('../PHP/getProducts.php')
                .then(response => response.text())
                .then(data => {
                    var parser = new DOMParser();
                    var doc = parser.parseFromString(data, 'text/html');
                    var bodyText = doc.body.innerText.trim().split('\n');
                    for (let index = 0; index < bodyText.length-1; index++) {
                        const line = bodyText[index];
                        var words = line.split(";");
                        var thisProdName = words[1];
                        var thisProdID = words[0];
                        var thisProdDesc = words[2];
                        var thisProdPrice = words[3];
                        var thisProdImgSrc = words[4];
                        displayProduct(thisProdID, thisProdName, thisProdDesc, thisProdPrice, thisProdImgSrc);
                    }
                    // Call setProductLinks after all products have been displayed
                    setProductLinks();
                });
        } catch (error) {
            console.log(error);
        }
    </script>

    <footer>
        <div class="footer">
            <div class="w-container">
                <div class="w-row">
                    <div class="w-col w-col-4">
                        <h3>About</h3>
                        <div></div>
                        <div>Made with Html, Css, JavaScript...</div>
                        <div>...PhP and Sql, etc.</div>
                        <div>Smart Life</div>
                        <div>Your go-to company for IoT devices and solutions</div>
                        <div>Welcome to Smart Life, the forefront of the Internet of Things revolution.</div>
                    </div>
                    <div class="w-col w-col-4">
                        <h3>Useful Links</h3>
                        <div class="footer-link-row">
                            <a href="index.html" target="_blank" class="footer-link">Home</a>
                            <a href="shop.html" target="_blank" class="footer-link">Shop</a>
                        </div>
                        <div class="footer-link-row">
                            <a href="about.html" target="_blank" class="footer-link">About</a>
                            <a href="#" target="_blank" class="footer-link" id="accountLinkFooter">Account</a>
                        </div>
                        <div class="footer-link-row">
                            <a href="contact.html" target="_blank" class="footer-link">Contact</a>
                            <a href="cart.html" target="_blank" class="footer-link">Cart</a>
                        </div>
                        <div class="footer-link-row">
                            <a href="login.html" target="_blank" class="footer-link">Login</a>
                            <a href="register.html" target="_blank" class="footer-link">Sign-up</a>
                        </div>
                    </div>
                    <div class="f-col">
                        <h3>Socials</h3>
                        <div>
                            <img src="https://assets-global.website-files.com/5739f5a49fbb0b705633b84e/5739f5a59fbb0b705633b875_social-18.svg"
                                width="20" alt="" class="info-icon">
                            <a href="https://twitter.com/" class="footer-link with-icon">Twitter</a>
                        </div>
                        <div>
                            <img src="https://assets-global.website-files.com/5739f5a49fbb0b705633b84e/5739f5a59fbb0b705633b864_social-03.svg"
                                width="20" alt="" class="info-icon">
                            <a href="https://www.facebook.com/" class="footer-link with-icon">Facebook</a>
                        </div>
                        <div>
                            <img src="https://assets-global.website-files.com/5739f5a49fbb0b705633b84e/5739f5a59fbb0b705633b86a_social-11.svg"
                                width="20" alt="" class="info-icon">
                            <a href="https://www.pinterest.com/" class="footer-link with-icon">Pinterest</a>
                        </div>
                        <div>
                            <img src="https://assets-global.website-files.com/5739f5a49fbb0b705633b84e/5739f5a59fbb0b705633b866_social-06.svg"
                                width="20" alt="" class="info-icon">
                            <a href="https://plus.google.com/" class="footer-link with-icon">Google</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <h1>Copyright Hasan Akhtar 2024</h1>
    </footer>
</body>

</html>